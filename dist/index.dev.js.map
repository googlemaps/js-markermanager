{"version":3,"file":"index.dev.js","sources":["../src/utils.ts","../src/gridbounds.ts","../src/markermanager.ts"],"sourcesContent":[null,null,null],"names":["latLngToPixel","latlng","zoom","google","maps","Point","lng","lat","sinofphi","Math","sin","PI","log","latToY","GridBounds","constructor","bounds","z","this","minX","min","x","maxX","max","minY","y","maxY","equals","gridBounds","containsPoint","point","map","_ref","maxZoom","trackMarkers","shown","borderPadding","_tileSize","_map","_mapZoom","getZoom","_maxZoom","_trackMarkers","_swPadding","Size","_nePadding","_gridWidth","_grid","_numMarkers","shownMarkers","event","addListenerOnce","_initialize","mapTypes","sType","get","addListener","_onMapMoveEnd","bind","resetManager","_shownBounds","_getMapGridBounds","trigger","_removeOverlay","marker","setMap","_addOverlay","mapWidth","ceil","clearMarkers","_processAll","_getTilePoint","padding","pixelPoint","floor","width","height","_addMarkerBatch","minZoom","mPoint","getPosition","set","oldPoint","newPoint","_onMarkerMoved","gridPoint","_getGridCellCreate","push","_isGridPointVisible","vertical","horizontal","changed","oldGrid","newGrid","cell","_getGridCellNoCreate","_removeMarkerFromCell","_notifyListeners","removeMarker","grid","addMarkers","markers","_getOptmaxZoom","i","length","getMarkerCount","total","getMarker","LatLng","Marker","position","undefined","addMarker","_getGridBounds","swPadding","nePadding","bl","getSouthWest","tr","getNorthEast","sw","ne","gw","getBounds","window","setTimeout","_updateMarkers","visible","isHidden","show","refresh","hide","toggle","newBounds","_rectangleDiff","_removeCellMarkers","_addCellMarkers","callback","_processCellMarkers","bounds1","bounds2","_rectangleDiffCoords","minX1","minY1","maxX1","maxY1","minX2","minY2","maxX2","maxY2","shift","splice"],"mappings":"wLAyCgB,SAAAA,EACdC,EACAC,GAEA,OAAO,IAAIC,OAAOC,KAAKC,SAClB,IAzBSC,EAyBIL,EAAOK,OAxBlB,EAAIA,EAAM,MAwBkB,GAAMJ,EAAO,QAC3C,GAjBP,SAAgBK,GACd,MAAMC,EAAWC,KAAKC,IAAKH,EAAME,KAAKE,GAAM,KAC5C,OAAO,EAAK,GAAMF,KAAKE,GAAMF,KAAKG,KAAK,EAAIJ,IAAa,EAAIA,IAejDK,CAAOZ,EAAOM,QAAU,GAAML,EAAO,KA1BlD,IAAgBI,QCDHQ,EAYXC,YAAYC,EAA6BC,GAElCA,KAAAA,EAAIA,EACTC,KAAKC,KAAOV,KAAKW,IAAIJ,EAAO,GAAGK,EAAGL,EAAO,GAAGK,GAC5CH,KAAKI,KAAOb,KAAKc,IAAIP,EAAO,GAAGK,EAAGL,EAAO,GAAGK,GAC5CH,KAAKM,KAAOf,KAAKW,IAAIJ,EAAO,GAAGS,EAAGT,EAAO,GAAGS,GAC5CP,KAAKQ,KAAOjB,KAAKc,IAAIP,EAAO,GAAGS,EAAGT,EAAO,GAAGS,GAQ9CE,OAAOC,GAEH,OAAAV,KAAKI,OAASM,EAAWN,MACzBJ,KAAKQ,OAASE,EAAWF,MACzBR,KAAKC,OAASS,EAAWT,MACzBD,KAAKM,OAASI,EAAWJ,KAa7BK,cAAcC,GAEV,OAAAZ,KAAKC,MAAQW,EAAMT,GACnBH,KAAKI,MAAQQ,EAAMT,GACnBH,KAAKM,MAAQM,EAAML,GACnBP,KAAKQ,MAAQI,EAAML,0BCtCzB,MAqBEV,YACEgB,EAC0EC,GAA1E,IAAAC,QAAEA,EAAU,GAAZC,aAAgBA,EAAhBC,MAA8BA,GAAQ,EAAtCC,cAA4CA,EAAgB,KAAcJ,EAhB3DK,KAAAA,UAAG,KAkBbC,KAAAA,KAAOP,EACZb,KAAKqB,SAAWR,EAAIS,UACfC,KAAAA,SAAWR,EAChBf,KAAKwB,cAAgBR,EAGrBhB,KAAKyB,WAAa,IAAIxC,OAAOC,KAAKwC,MAAMR,EAAeA,GACvDlB,KAAK2B,WAAa,IAAI1C,OAAOC,KAAKwC,KAAKR,GAAgBA,GAElDU,KAAAA,WAAa,GACbC,KAAAA,MAAQ,GACb7B,KAAK6B,MAAM7B,KAAKuB,UAAY,GACvBO,KAAAA,YAAc,GACnB9B,KAAK8B,YAAY9B,KAAKuB,UAAY,EAE7BQ,KAAAA,aAAe,EACfd,KAAAA,MAAQA,EAEbhC,OAAOC,KAAK8C,MAAMC,gBAAgBpB,EAAK,QAAQ,KAC7Cb,KAAKkC,iBAIDA,cACN,MAAMC,EAAWnC,KAAKoB,KAAKe,SAI3B,IAAK,MAAMC,KAASD,EAEhBC,KAASD,GACTA,EAASE,IAAID,IACmB,WAAhCD,EAASE,IAAID,GAAOrB,SAEGf,KAAKoB,KAAKe,SAASE,IAAID,GAAOrB,QAOzD9B,OAAOC,KAAK8C,MAAMM,YAChBtC,KAAKoB,KACL,UACApB,KAAKuC,cAAcC,KAAKxC,OAG1Bf,OAAOC,KAAK8C,MAAMM,YAChBtC,KAAKoB,KACL,OACApB,KAAKuC,cAAcC,KAAKxC,OAG1Bf,OAAOC,KAAK8C,MAAMM,YAChBtC,KAAKoB,KACL,eACApB,KAAKuC,cAAcC,KAAKxC,OAG1BA,KAAKyC,eAELzC,KAAK0C,aAAe1C,KAAK2C,oBAEzB1D,OAAOC,KAAK8C,MAAMY,QAAQ5C,KAAM,UAO1B6C,eAAeC,GACrBA,EAAOC,OAAO,MACd/C,KAAK+B,eAQCiB,YAAYF,GACd9C,KAAKiB,QACP6B,EAAOC,OAAO/C,KAAKoB,MACnBpB,KAAK+B,gBAQFU,eACDQ,IAAAA,EAAW,IACf,IAAK,IAAIjE,EAAO,EAAGA,GAAQgB,KAAKuB,WAAYvC,EAC1CgB,KAAK6B,MAAM7C,GAAQ,GACnBgB,KAAK8B,YAAY9C,GAAQ,EACzBgB,KAAK4B,WAAW5C,GAAQO,KAAK2D,KAAKD,EAAWjD,KAAKmB,WAClD8B,IAAa,EAQVE,eACAC,KAAAA,YAAYpD,KAAK0C,aAAc1C,KAAK6C,eAAeL,KAAKxC,OAC7DA,KAAKyC,eAcCY,cACNtE,EACAC,EACAsE,GAEA,MAAMC,EAAazE,EAAcC,EAAQC,GAOzC,OALc,IAAIC,OAAOC,KAAKC,MAC5BI,KAAKiE,OAAOD,EAAWpD,EAAImD,EAAQG,OAASzD,KAAKmB,WACjD5B,KAAKiE,OAAOD,EAAWhD,EAAI+C,EAAQI,QAAU1D,KAAKmB,YAe9CwC,gBACNb,EACAc,EACA7C,GAEA,MAAM8C,EAASf,EAAOgB,cACtBhB,EAAOiB,IAAI,YAAaH,GAIpB5D,KAAKwB,eACPvC,OAAOC,KAAK8C,MAAMM,YAChBQ,EACA,WACA,CACEA,EACAkB,EACAC,KAEAjE,KAAKkE,eAAepB,EAAQkB,EAAUC,MAKtCE,MAAAA,EAAYnE,KAAKqD,cACrBQ,EACA9C,EACA,IAAI9B,OAAOC,KAAKwC,KAAK,EAAG,IAGrB,IAAA,IAAI1C,EAAO+B,EAAS/B,GAAQ4E,EAAS5E,IAAQ,CACnCgB,KAAKoE,mBAAmBD,EAAUhE,EAAGgE,EAAU5D,EAAGvB,GAC1DqF,KAAKvB,GAEVqB,EAAUhE,EAAIgE,EAAUhE,GAAK,EAC7BgE,EAAU5D,EAAI4D,EAAU5D,GAAK,GAazB+D,oBAAoB1D,GAC1B,MAAM2D,EACJvE,KAAK0C,aAAapC,MAAQM,EAAML,GAAKK,EAAML,GAAKP,KAAK0C,aAAalC,KAC9DP,EAAOD,KAAK0C,aAAazC,KAC/B,IAAIuE,EAAavE,GAAQW,EAAMT,GAAKS,EAAMT,GAAKH,KAAK0C,aAAatC,KACjE,IAAKoE,GAAcvE,EAAO,EAAG,CAGrBwD,MAAAA,EAAQzD,KAAK4B,WAAW5B,KAAK0C,aAAa3C,GAChDyE,EAAavE,EAAOwD,GAAS7C,EAAMT,GAAKS,EAAMT,GAAKsD,EAAQ,EAEtDc,OAAAA,GAAYC,EAYbN,eACNpB,EACAkB,EACAC,GAKIjF,IAAAA,EAAOgB,KAAKuB,SACZkD,GAAU,EACRC,MAAAA,EAAU1E,KAAKqD,cACnBW,EACAhF,EACA,IAAIC,OAAOC,KAAKwC,KAAK,EAAG,IAEpBiD,EAAU3E,KAAKqD,cACnBY,EACAjF,EACA,IAAIC,OAAOC,KAAKwC,KAAK,EAAG,IAEnB1C,KAAAA,GAAQ,IAAM0F,EAAQvE,IAAMwE,EAAQxE,GAAKuE,EAAQnE,IAAMoE,EAAQpE,IAAI,CACxE,MAAMqE,EAAO5E,KAAK6E,qBAAqBH,EAAQvE,EAAGuE,EAAQnE,EAAGvB,GACzD4F,GACE5E,KAAK8E,sBAAsBF,EAAM9B,IACnC9C,KAAKoE,mBAAmBO,EAAQxE,EAAGwE,EAAQpE,EAAGvB,GAAMqF,KAAKvB,GAOzD9D,IAASgB,KAAKqB,WACZrB,KAAKsE,oBAAoBI,GACtB1E,KAAKsE,oBAAoBK,KACvB9B,KAAAA,eAAeC,GACpB2B,GAAU,GAGRzE,KAAKsE,oBAAoBK,KACtB3B,KAAAA,YAAYF,GACjB2B,GAAU,IAIhBC,EAAQvE,EAAIuE,EAAQvE,GAAK,EACzBuE,EAAQnE,EAAImE,EAAQnE,GAAK,EACzBoE,EAAQxE,EAAIwE,EAAQxE,GAAK,EACzBwE,EAAQpE,EAAIoE,EAAQpE,GAAK,IACvBvB,EAEAyF,GACFzE,KAAK+E,mBASFC,aAAalC,GACd9D,IAAAA,EAAOgB,KAAKuB,SACZkD,GAAU,EACd,MAAM7D,EAAQkC,EAAOgB,cACfmB,EAAOjF,KAAKqD,cAAczC,EAAO5B,EAAM,IAAIC,OAAOC,KAAKwC,KAAK,EAAG,IAC9D1C,KAAAA,GAAQ,GAAG,CAChB,MAAM4F,EAAO5E,KAAK6E,qBAAqBI,EAAK9E,EAAG8E,EAAK1E,EAAGvB,GAEnD4F,GACF5E,KAAK8E,sBAAsBF,EAAM9B,GAK/B9D,IAASgB,KAAKqB,UACZrB,KAAKsE,oBAAoBW,KACtBpC,KAAAA,eAAeC,GACpB2B,GAAU,GAGdQ,EAAK9E,EAAI8E,EAAK9E,GAAK,EACnB8E,EAAK1E,EAAI0E,EAAK1E,GAAK,IACjBvB,EAEAyF,GACFzE,KAAK+E,mBAEP/E,KAAK8B,YAAYgB,EAAOT,IAAI,gBAWvB6C,WACLC,EACAvB,EACA7C,GAEAA,EAAUf,KAAKoF,eAAerE,GAC9B,IAAK,IAAIsE,EAAIF,EAAQG,OAAS,EAAGD,GAAK,EAAGA,IAClC1B,KAAAA,gBAAgBwB,EAAQE,GAAIzB,EAAS7C,GAG5Cf,KAAK8B,YAAY8B,IAAYuB,EAAQG,OAU/BF,eAAerE,GACdA,OAAAA,GAAWf,KAAKuB,SASlBgE,eAAevG,GAChBwG,IAAAA,EAAQ,EACP,IAAA,IAAIzF,EAAI,EAAGA,GAAKf,EAAMe,IACzByF,GAASxF,KAAK8B,YAAY/B,GAE5B,OAAOyF,EAaFC,UAAUpG,EAAaD,EAAaJ,GACzC,MAAM6E,EAAS,IAAI5E,OAAOC,KAAKwG,OAAOrG,EAAKD,GACrC+E,EAAYnE,KAAKqD,cACrBQ,EACA7E,EACA,IAAIC,OAAOC,KAAKwC,KAAK,EAAG,IAGtBoB,IAAAA,EAAS,IAAI7D,OAAOC,KAAKyG,OAAO,CAAEC,SAAU/B,IAEhD,MAAMe,EAAO5E,KAAK6E,qBAAqBV,EAAUhE,EAAGgE,EAAU5D,EAAGvB,GAC7D4F,QAASiB,IAATjB,EACF,IAAK,IAAIS,EAAI,EAAGA,EAAIT,EAAKU,OAAQD,IAE7BhG,IAAQuF,EAAKS,GAAGvB,cAAczE,OAC9BD,IAAQwF,EAAKS,GAAGvB,cAAc1E,QAE9B0D,EAAS8B,EAAKS,IAIpB,OAAOvC,EAUFgD,UACLhD,EACAc,EACA7C,GAEAA,EAAUf,KAAKoF,eAAerE,GAC9Bf,KAAK2D,gBAAgBb,EAAQc,EAAS7C,GAChCoD,MAAAA,EAAYnE,KAAKqD,cACrBP,EAAOgB,cACP9D,KAAKqB,SACL,IAAIpC,OAAOC,KAAKwC,KAAK,EAAG,IAGxB1B,KAAKsE,oBAAoBH,IACzBP,GAAW5D,KAAK0C,aAAa3C,GAC7BC,KAAK0C,aAAa3C,GAAKgB,IAElBiC,KAAAA,YAAYF,GACjB9C,KAAK+E,oBAEFjD,KAAAA,YAAY8B,KAaXQ,mBACNjE,EACAI,EACAR,GAgBO,OAbHI,EAAI,IACNA,GAAKH,KAAK4B,WAAW7B,IAGlBC,KAAK6B,MAAM9B,KACdC,KAAK6B,MAAM9B,GAAK,IAEbC,KAAK6B,MAAM9B,GAAGI,KACjBH,KAAK6B,MAAM9B,GAAGI,GAAK,IAEhBH,KAAK6B,MAAM9B,GAAGI,GAAGI,KACfsB,KAAAA,MAAM9B,GAAGI,GAAGI,GAAK,IAEjBP,KAAK6B,MAAM9B,GAAGI,GAAGI,GAalBsE,qBACN1E,EACAI,EACAR,GAMA,OAJII,EAAI,IACNA,GAAKH,KAAK4B,WAAW7B,IAGlBC,KAAK6B,MAAM9B,IAGXC,KAAK6B,MAAM9B,GAAGI,IAGdH,KAAK6B,MAAM9B,GAAGI,GAAGI,GAGfP,KAAK6B,MAAM9B,GAAGI,GAAGI,GARf,KAsBHwF,eACNjG,EACAd,EACAgH,EACAC,GAEAjH,EAAOO,KAAKW,IAAIlB,EAAMgB,KAAKuB,UAE3B,MAAM2E,EAAKpG,EAAOqG,eACZC,EAAKtG,EAAOuG,eACZC,EAAKtG,KAAKqD,cAAc6C,EAAIlH,EAAMgH,GAElCO,EAAKvG,KAAKqD,cAAc+C,EAAIpH,EAAMiH,GAClCO,EAAKxG,KAAK4B,WAAW5C,IAGvBoH,EAAGhH,MAAQ8G,EAAG9G,OAASmH,EAAGpG,EAAImG,EAAGnG,KACnCmG,EAAGnG,GAAKqG,GAEND,EAAGpG,EAAImG,EAAGnG,EAAI,GAAKqG,IAErBF,EAAGnG,EAAI,EACPoG,EAAGpG,EAAIqG,EAAK,GAGd,MAAM9F,EAAa,IAAId,EAAW,CAAC0G,EAAIC,GAAKvH,GAG5C,OAFA0B,EAAWX,EAAIf,EAER0B,EAQDiC,oBACN,OAAO3C,KAAK+F,eACV/F,KAAKoB,KAAKqF,YACVzG,KAAKqB,SACLrB,KAAKyB,WACLzB,KAAK2B,YAWDY,gBACNmE,OAAOC,WAAW3G,KAAK4G,eAAepE,KAAKxC,MAAO,GAU7C6G,UACL,QAAO7G,KAAKiB,MAQP6F,WACE,OAAC9G,KAAKiB,MAMR8F,OACA9F,KAAAA,OAAQ,EACbjB,KAAKgH,UAMAC,OACAhG,KAAAA,OAAQ,EACbjB,KAAKgH,UAMAE,SACLlH,KAAKiB,OAASjB,KAAKiB,MACnBjB,KAAKgH,UAUAA,UACDhH,KAAK+B,aAAe,GACjBqB,KAAAA,YAAYpD,KAAK0C,aAAc1C,KAAK6C,eAAeL,KAAKxC,OAG3DA,KAAK+G,MACF3D,KAAAA,YAAYpD,KAAK0C,aAAc1C,KAAKgD,YAAYR,KAAKxC,OAE5DA,KAAK+E,mBAMC6B,iBACN5G,KAAKqB,SAAWrB,KAAKoB,KAAKE,UAC1B,MAAM6F,EAAYnH,KAAK2C,oBAKrBwE,EAAU1G,OAAOT,KAAK0C,eACtByE,EAAUpH,IAAMC,KAAK0C,aAAa3C,IAKhCoH,EAAUpH,IAAMC,KAAK0C,aAAa3C,GAC/BqD,KAAAA,YAAYpD,KAAK0C,aAAc1C,KAAK6C,eAAeL,KAAKxC,OACzDA,KAAK+G,MAEF3D,KAAAA,YAAY+D,EAAWnH,KAAKgD,YAAYR,KAAKxC,SAIpDA,KAAKoH,eACHpH,KAAK0C,aACLyE,EACAnH,KAAKqH,mBAAmB7E,KAAKxC,OAI3BA,KAAK+G,MAEP/G,KAAKoH,eACHD,EACAnH,KAAK0C,aACL1C,KAAKsH,gBAAgB9E,KAAKxC,QAI3B0C,KAAAA,aAAeyE,EAEpBnH,KAAK+E,oBAMCA,mBACN9F,OAAOC,KAAK8C,MAAMY,QAChB5C,KACA,UACAA,KAAK0C,aACL1C,KAAK+B,cAUDqB,YACNtD,EACAyH,GAEA,IAAK,IAAIpH,EAAIL,EAAOG,KAAME,GAAKL,EAAOM,KAAMD,IAC1C,IAAK,IAAII,EAAIT,EAAOQ,KAAMC,GAAKT,EAAOU,KAAMD,IACrCiH,KAAAA,oBAAoBrH,EAAGI,EAAGT,EAAOC,EAAGwH,GAavCC,oBACNrH,EACAI,EACAR,EACAwH,GAEM3C,MAAAA,EAAO5E,KAAK6E,qBAAqB1E,EAAGI,EAAGR,GAC7C,GAAI6E,EACF,IAAK,IAAIS,EAAIT,EAAKU,OAAS,EAAGD,GAAK,EAAGA,IACpCkC,EAAS3C,EAAKS,IAYZgC,mBAAmBlH,EAAWI,EAAWR,GAC/CC,KAAKwH,oBAAoBrH,EAAGI,EAAGR,EAAGC,KAAK6C,eAAeL,KAAKxC,OAUrDsH,gBAAgBnH,EAAWI,EAAWR,GAC5CC,KAAKwH,oBAAoBrH,EAAGI,EAAGR,EAAGC,KAAKgD,YAAYR,KAAKxC,OAelDoH,eACNK,EACAC,EACAH,GAEKI,KAAAA,qBAAqBF,EAASC,GAAS,CAACvH,EAAGI,KAC9CgH,EAASpH,EAAGI,EAAGkH,EAAQ1H,MAYnB4H,qBACNF,EACAC,EACAH,GAEA,MAAMK,EAAQH,EAAQxH,KAChB4H,EAAQJ,EAAQnH,KAChBwH,EAAQL,EAAQrH,KAChB2H,EAAQN,EAAQjH,KAChBwH,EAAQN,EAAQzH,KAChBgI,EAAQP,EAAQpH,KAChB4H,EAAQR,EAAQtH,KAChB+H,EAAQT,EAAQlH,KAElBL,IAAAA,EAAGI,EACFJ,IAAAA,EAAIyH,EAAOzH,GAAK2H,EAAO3H,IAAK,CAG/B,IAAKI,EAAIsH,EAAOtH,GAAKwH,GAASxH,EAAI0H,EAAO1H,IAEvCgH,EAASpH,EAAGI,GAGd,IACEA,EAAIhB,KAAKc,IAAI8H,EAAQ,EAAGN,GACxBtH,GAAKwH,EACLxH,IAEAgH,EAASpH,EAAGI,GAIXA,IAAAA,EAAIhB,KAAKc,IAAIwH,EAAOI,GAAQ1H,GAAKhB,KAAKW,IAAI6H,EAAOI,GAAQ5H,IAAK,CAG5DJ,IAAAA,EAAIZ,KAAKW,IAAI4H,EAAQ,EAAGE,GAAS,EAAG7H,GAAKyH,EAAOzH,IAEnDoH,EAASpH,EAAGI,GAGd,IACEJ,EAAIZ,KAAKc,IAAIuH,EAAOM,EAAQ,GAC5B/H,GAAK2H,EACL3H,IAEAoH,EAASpH,EAAGI,IAQVuE,sBACNF,EACA9B,GAEIsF,IAAAA,EAAQ,EACZ,IAAK,IAAI/C,EAAI,EAAGA,EAAIT,EAAKU,SAAUD,EAC7BT,EAAKS,KAAOvC,IACd8B,EAAKyD,OAAOhD,IAAK,GACjB+C,KAGJ,OAAOA"}