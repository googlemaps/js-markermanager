!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).google=t.google||{},t.google.maps=t.google.maps||{},t.google.maps.plugins=t.google.maps.plugins||{},t.google.maps.plugins.markermanager={}))}(this,(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=function(t){return t&&t.Math==Math&&t},s=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof i&&i)||function(){return this}()||Function("return this")(),a={},u=function(t){try{return!!t()}catch(t){return!0}},l=!u((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),h=!u((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),c=h,f=Function.prototype.call,g=c?f.bind(f):function(){return f.apply(f,arguments)},d={},m={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,y=p&&!m.call({1:2},1);d.f=y?function(t){var e=p(this,t);return!!e&&e.enumerable}:m;var v,_,b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},w=h,M=Function.prototype,k=M.call,x=w&&M.bind.bind(k,k),O=w?x:function(t){return function(){return k.apply(t,arguments)}},S=O,P=S({}.toString),j=S("".slice),C=function(t){return j(P(t),8,-1)},T=u,z=C,B=Object,E=O("".split),G=T((function(){return!B("z").propertyIsEnumerable(0)}))?function(t){return"String"==z(t)?E(t,""):B(t)}:B,L=function(t){return null==t},Z=L,A=TypeError,D=function(t){if(Z(t))throw A("Can't call method on "+t);return t},X=G,Y=D,F=function(t){return X(Y(t))},I="object"==typeof document&&document.all,N={all:I,IS_HTMLDDA:void 0===I&&void 0!==I},W=N.all,V=N.IS_HTMLDDA?function(t){return"function"==typeof t||t===W}:function(t){return"function"==typeof t},R=V,H=N.all,q=N.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:R(t)||t===H}:function(t){return"object"==typeof t?null!==t:R(t)},U=s,K=V,$=function(t){return K(t)?t:void 0},J=function(t,e){return arguments.length<2?$(U[t]):U[t]&&U[t][e]},Q=O({}.isPrototypeOf),tt=s,et=J("navigator","userAgent")||"",nt=tt.process,rt=tt.Deno,it=nt&&nt.versions||rt&&rt.version,ot=it&&it.v8;ot&&(_=(v=ot.split("."))[0]>0&&v[0]<4?1:+(v[0]+v[1])),!_&&et&&(!(v=et.match(/Edge\/(\d+)/))||v[1]>=74)&&(v=et.match(/Chrome\/(\d+)/))&&(_=+v[1]);var st=_,at=st,ut=u,lt=!!Object.getOwnPropertySymbols&&!ut((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&at&&at<41})),ht=lt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ct=J,ft=V,gt=Q,dt=Object,mt=ht?function(t){return"symbol"==typeof t}:function(t){var e=ct("Symbol");return ft(e)&&gt(e.prototype,dt(t))},pt=String,yt=function(t){try{return pt(t)}catch(t){return"Object"}},vt=V,_t=yt,bt=TypeError,wt=function(t){if(vt(t))return t;throw bt(_t(t)+" is not a function")},Mt=L,kt=g,xt=V,Ot=q,St=TypeError,Pt={},jt={get exports(){return Pt},set exports(t){Pt=t}},Ct=s,Tt=Object.defineProperty,zt=function(t,e){try{Tt(Ct,t,{value:e,configurable:!0,writable:!0})}catch(n){Ct[t]=e}return e},Bt=zt,Et="__core-js_shared__",Gt=s[Et]||Bt(Et,{}),Lt=Gt;(jt.exports=function(t,e){return Lt[t]||(Lt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.26.1",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Zt=D,At=Object,Dt=function(t){return At(Zt(t))},Xt=Dt,Yt=O({}.hasOwnProperty),Ft=Object.hasOwn||function(t,e){return Yt(Xt(t),e)},It=O,Nt=0,Wt=Math.random(),Vt=It(1..toString),Rt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Vt(++Nt+Wt,36)},Ht=s,qt=Ft,Ut=Rt,Kt=lt,$t=ht,Jt=Pt("wks"),Qt=Ht.Symbol,te=Qt&&Qt.for,ee=$t?Qt:Qt&&Qt.withoutSetter||Ut,ne=function(t){if(!qt(Jt,t)||!Kt&&"string"!=typeof Jt[t]){var e="Symbol."+t;Kt&&qt(Qt,t)?Jt[t]=Qt[t]:Jt[t]=$t&&te?te(e):ee(e)}return Jt[t]},re=g,ie=q,oe=mt,se=function(t,e){var n=t[e];return Mt(n)?void 0:wt(n)},ae=function(t,e){var n,r;if("string"===e&&xt(n=t.toString)&&!Ot(r=kt(n,t)))return r;if(xt(n=t.valueOf)&&!Ot(r=kt(n,t)))return r;if("string"!==e&&xt(n=t.toString)&&!Ot(r=kt(n,t)))return r;throw St("Can't convert object to primitive value")},ue=TypeError,le=ne("toPrimitive"),he=function(t,e){if(!ie(t)||oe(t))return t;var n,r=se(t,le);if(r){if(void 0===e&&(e="default"),n=re(r,t,e),!ie(n)||oe(n))return n;throw ue("Can't convert object to primitive value")}return void 0===e&&(e="number"),ae(t,e)},ce=mt,fe=function(t){var e=he(t,"string");return ce(e)?e:e+""},ge=q,de=s.document,me=ge(de)&&ge(de.createElement),pe=function(t){return me?de.createElement(t):{}},ye=!l&&!u((function(){return 7!=Object.defineProperty(pe("div"),"a",{get:function(){return 7}}).a})),ve=l,_e=g,be=d,we=b,Me=F,ke=fe,xe=Ft,Oe=ye,Se=Object.getOwnPropertyDescriptor;a.f=ve?Se:function(t,e){if(t=Me(t),e=ke(e),Oe)try{return Se(t,e)}catch(t){}if(xe(t,e))return we(!_e(be.f,t,e),t[e])};var Pe={},je=l&&u((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ce=q,Te=String,ze=TypeError,Be=function(t){if(Ce(t))return t;throw ze(Te(t)+" is not an object")},Ee=l,Ge=ye,Le=je,Ze=Be,Ae=fe,De=TypeError,Xe=Object.defineProperty,Ye=Object.getOwnPropertyDescriptor,Fe="enumerable",Ie="configurable",Ne="writable";Pe.f=Ee?Le?function(t,e,n){if(Ze(t),e=Ae(e),Ze(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Ne in n&&!n.writable){var r=Ye(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:Ie in n?n.configurable:r.configurable,enumerable:Fe in n?n.enumerable:r.enumerable,writable:!1})}return Xe(t,e,n)}:Xe:function(t,e,n){if(Ze(t),e=Ae(e),Ze(n),Ge)try{return Xe(t,e,n)}catch(t){}if("get"in n||"set"in n)throw De("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var We=Pe,Ve=b,Re=l?function(t,e,n){return We.f(t,e,Ve(1,n))}:function(t,e,n){return t[e]=n,t},He={},qe={get exports(){return He},set exports(t){He=t}},Ue=l,Ke=Ft,$e=Function.prototype,Je=Ue&&Object.getOwnPropertyDescriptor,Qe=Ke($e,"name"),tn={EXISTS:Qe,PROPER:Qe&&"something"===function(){}.name,CONFIGURABLE:Qe&&(!Ue||Ue&&Je($e,"name").configurable)},en=V,nn=Gt,rn=O(Function.toString);en(nn.inspectSource)||(nn.inspectSource=function(t){return rn(t)});var on,sn,an,un=nn.inspectSource,ln=V,hn=s.WeakMap,cn=ln(hn)&&/native code/.test(String(hn)),fn=Rt,gn=Pt("keys"),dn={},mn=cn,pn=s,yn=q,vn=Re,_n=Ft,bn=Gt,wn=function(t){return gn[t]||(gn[t]=fn(t))},Mn=dn,kn="Object already initialized",xn=pn.TypeError,On=pn.WeakMap;if(mn||bn.state){var Sn=bn.state||(bn.state=new On);Sn.get=Sn.get,Sn.has=Sn.has,Sn.set=Sn.set,on=function(t,e){if(Sn.has(t))throw xn(kn);return e.facade=t,Sn.set(t,e),e},sn=function(t){return Sn.get(t)||{}},an=function(t){return Sn.has(t)}}else{var Pn=wn("state");Mn[Pn]=!0,on=function(t,e){if(_n(t,Pn))throw xn(kn);return e.facade=t,vn(t,Pn,e),e},sn=function(t){return _n(t,Pn)?t[Pn]:{}},an=function(t){return _n(t,Pn)}}var jn={set:on,get:sn,has:an,enforce:function(t){return an(t)?sn(t):on(t,{})},getterFor:function(t){return function(e){var n;if(!yn(e)||(n=sn(e)).type!==t)throw xn("Incompatible receiver, "+t+" required");return n}}},Cn=u,Tn=V,zn=Ft,Bn=l,En=tn.CONFIGURABLE,Gn=un,Ln=jn.enforce,Zn=jn.get,An=Object.defineProperty,Dn=Bn&&!Cn((function(){return 8!==An((function(){}),"length",{value:8}).length})),Xn=String(String).split("String"),Yn=qe.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!zn(t,"name")||En&&t.name!==e)&&(Bn?An(t,"name",{value:e,configurable:!0}):t.name=e),Dn&&n&&zn(n,"arity")&&t.length!==n.arity&&An(t,"length",{value:n.arity});try{n&&zn(n,"constructor")&&n.constructor?Bn&&An(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=Ln(t);return zn(r,"source")||(r.source=Xn.join("string"==typeof e?e:"")),t};Function.prototype.toString=Yn((function(){return Tn(this)&&Zn(this).source||Gn(this)}),"toString");var Fn=V,In=Pe,Nn=He,Wn=zt,Vn={},Rn=Math.ceil,Hn=Math.floor,qn=Math.trunc||function(t){var e=+t;return(e>0?Hn:Rn)(e)},Un=function(t){var e=+t;return e!=e||0===e?0:qn(e)},Kn=Un,$n=Math.max,Jn=Math.min,Qn=function(t,e){var n=Kn(t);return n<0?$n(n+e,0):Jn(n,e)},tr=Un,er=Math.min,nr=function(t){return t>0?er(tr(t),9007199254740991):0},rr=function(t){return nr(t.length)},ir=F,or=Qn,sr=rr,ar=function(t){return function(e,n,r){var i,o=ir(e),s=sr(o),a=or(r,s);if(t&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},ur={includes:ar(!0),indexOf:ar(!1)},lr=Ft,hr=F,cr=ur.indexOf,fr=dn,gr=O([].push),dr=function(t,e){var n,r=hr(t),i=0,o=[];for(n in r)!lr(fr,n)&&lr(r,n)&&gr(o,n);for(;e.length>i;)lr(r,n=e[i++])&&(~cr(o,n)||gr(o,n));return o},mr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");Vn.f=Object.getOwnPropertyNames||function(t){return dr(t,mr)};var pr={};pr.f=Object.getOwnPropertySymbols;var yr=J,vr=Vn,_r=pr,br=Be,wr=O([].concat),Mr=yr("Reflect","ownKeys")||function(t){var e=vr.f(br(t)),n=_r.f;return n?wr(e,n(t)):e},kr=Ft,xr=Mr,Or=a,Sr=Pe,Pr=u,jr=V,Cr=/#|\.prototype\./,Tr=function(t,e){var n=Br[zr(t)];return n==Gr||n!=Er&&(jr(e)?Pr(e):!!e)},zr=Tr.normalize=function(t){return String(t).replace(Cr,".").toLowerCase()},Br=Tr.data={},Er=Tr.NATIVE="N",Gr=Tr.POLYFILL="P",Lr=Tr,Zr=s,Ar=a.f,Dr=Re,Xr=function(t,e,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:e;if(Fn(n)&&Nn(n,o,r),r.global)i?t[e]=n:Wn(e,n);else{try{r.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=n:In.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},Yr=zt,Fr=function(t,e,n){for(var r=xr(e),i=Sr.f,o=Or.f,s=0;s<r.length;s++){var a=r[s];kr(t,a)||n&&kr(n,a)||i(t,a,o(e,a))}},Ir=Lr,Nr=C,Wr=Array.isArray||function(t){return"Array"==Nr(t)},Vr=l,Rr=Wr,Hr=TypeError,qr=Object.getOwnPropertyDescriptor,Ur=Vr&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(Rr(t)&&!qr(t,"length").writable)throw Hr("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},Kr=TypeError,$r={};$r[ne("toStringTag")]="z";var Jr="[object z]"===String($r),Qr=V,ti=C,ei=ne("toStringTag"),ni=Object,ri="Arguments"==ti(function(){return arguments}()),ii=O,oi=u,si=V,ai=Jr?ti:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=ni(t),ei))?n:ri?ti(e):"Object"==(r=ti(e))&&Qr(e.callee)?"Arguments":r},ui=un,li=function(){},hi=[],ci=J("Reflect","construct"),fi=/^\s*(?:class|function)\b/,gi=ii(fi.exec),di=!fi.exec(li),mi=function(t){if(!si(t))return!1;try{return ci(li,hi,t),!0}catch(t){return!1}},pi=function(t){if(!si(t))return!1;switch(ai(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return di||!!gi(fi,ui(t))}catch(t){return!0}};pi.sham=!0;var yi=!ci||oi((function(){var t;return mi(mi.call)||!mi(Object)||!mi((function(){t=!0}))||t}))?pi:mi,vi=Wr,_i=yi,bi=q,wi=ne("species"),Mi=Array,ki=function(t){var e;return vi(t)&&(e=t.constructor,(_i(e)&&(e===Mi||vi(e.prototype))||bi(e)&&null===(e=e[wi]))&&(e=void 0)),void 0===e?Mi:e},xi=fe,Oi=Pe,Si=b,Pi=yt,ji=TypeError,Ci=u,Ti=st,zi=ne("species"),Bi=function(t,e){var n,r,i,o,s,a=t.target,u=t.global,l=t.stat;if(n=u?Zr:l?Zr[a]||Yr(a,{}):(Zr[a]||{}).prototype)for(r in e){if(o=e[r],i=t.dontCallGetSet?(s=Ar(n,r))&&s.value:n[r],!Ir(u?r:a+(l?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Fr(o,i)}(t.sham||i&&i.sham)&&Dr(o,"sham",!0),Xr(n,r,o,t)}},Ei=Dt,Gi=Qn,Li=Un,Zi=rr,Ai=Ur,Di=function(t){if(t>9007199254740991)throw Kr("Maximum allowed index exceeded");return t},Xi=function(t,e){return new(ki(t))(0===e?0:e)},Yi=function(t,e,n){var r=xi(e);r in t?Oi.f(t,r,Si(0,n)):t[r]=n},Fi=function(t,e){if(!delete t[e])throw ji("Cannot delete property "+Pi(e)+" of "+Pi(t))},Ii=function(t){return Ti>=51||!Ci((function(){var e=[];return(e.constructor={})[zi]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}("splice"),Ni=Math.max,Wi=Math.min;function Vi(t,e){return new google.maps.Point(~~(.5+(i=t.lng(),(1+i/180)*(2<<e+6))),~~(.5+(n=t.lat(),r=Math.sin(n*Math.PI/180),(1-.5/Math.PI*Math.log((1+r)/(1-r)))*(2<<e+6))));var n,r,i}Bi({target:"Array",proto:!0,forced:!Ii},{splice:function(t,e){var n,r,i,o,s,a,u=Ei(this),l=Zi(u),h=Gi(t,l),c=arguments.length;for(0===c?n=r=0:1===c?(n=0,r=l-h):(n=c-2,r=Wi(Ni(Li(e),0),l-h)),Di(l+n-r),i=Xi(u,r),o=0;o<r;o++)(s=h+o)in u&&Yi(i,o,u[s]);if(i.length=r,n<r){for(o=h;o<l-r;o++)a=o+n,(s=o+r)in u?u[a]=u[s]:Fi(u,a);for(o=l;o>l-r+n;o--)Fi(u,o-1)}else if(n>r)for(o=l-r;o>h;o--)a=o+n-1,(s=o+r-1)in u?u[a]=u[s]:Fi(u,a);for(o=0;o<n;o++)u[o+h]=arguments[o+2];return Ai(u,l-r+n),i}});var Ri=function(){function t(n,r){e(this,t),this.z=r,this.minX=Math.min(n[0].x,n[1].x),this.maxX=Math.max(n[0].x,n[1].x),this.minY=Math.min(n[0].y,n[1].y),this.maxY=Math.max(n[0].y,n[1].y)}return r(t,[{key:"equals",value:function(t){return this.maxX===t.maxX&&this.maxY===t.maxY&&this.minX===t.minX&&this.minY===t.minY}},{key:"containsPoint",value:function(t){return this.minX<=t.x&&this.maxX>=t.x&&this.minY<=t.y&&this.maxY>=t.y}}]),t}(),Hi=function(){function t(n,r){var i=this,o=r.maxZoom,s=void 0===o?19:o,a=r.trackMarkers,u=r.shown,l=void 0===u||u,h=r.borderPadding,c=void 0===h?100:h;e(this,t),this._tileSize=1024,this._map=n,this._mapZoom=n.getZoom(),this._maxZoom=s,this._trackMarkers=a,this._swPadding=new google.maps.Size(-c,c),this._nePadding=new google.maps.Size(c,-c),this._gridWidth={},this._grid=[],this._grid[this._maxZoom]=[],this._numMarkers={},this._numMarkers[this._maxZoom]=0,this.shownMarkers=0,this.shown=l,google.maps.event.addListenerOnce(n,"idle",(function(){i._initialize()}))}return r(t,[{key:"_initialize",value:function(){var t=this._map.mapTypes;for(var e in t)e in t&&t.get(e)&&"number"===t.get(e).maxZoom&&this._map.mapTypes.get(e).maxZoom;google.maps.event.addListener(this._map,"dragend",this._onMapMoveEnd.bind(this)),google.maps.event.addListener(this._map,"idle",this._onMapMoveEnd.bind(this)),google.maps.event.addListener(this._map,"zoom_changed",this._onMapMoveEnd.bind(this)),this.resetManager(),this._shownBounds=this._getMapGridBounds(),google.maps.event.trigger(this,"loaded")}},{key:"_removeOverlay",value:function(t){t.setMap(null),this.shownMarkers--}},{key:"_addOverlay",value:function(t){this.shown&&(t.setMap(this._map),this.shownMarkers++)}},{key:"resetManager",value:function(){for(var t=256,e=0;e<=this._maxZoom;++e)this._grid[e]=[],this._numMarkers[e]=0,this._gridWidth[e]=Math.ceil(t/this._tileSize),t<<=1}},{key:"clearMarkers",value:function(){this._processAll(this._shownBounds,this._removeOverlay.bind(this)),this.resetManager()}},{key:"_getTilePoint",value:function(t,e,n){var r=Vi(t,e);return new google.maps.Point(Math.floor((r.x+n.width)/this._tileSize),Math.floor((r.y+n.height)/this._tileSize))}},{key:"_addMarkerBatch",value:function(t,e,n){var r=this,i=t.getPosition();t.set("__minZoom",e),this._trackMarkers&&google.maps.event.addListener(t,"changed",(function(t,e,n){r._onMarkerMoved(t,e,n)}));for(var o=this._getTilePoint(i,n,new google.maps.Size(0,0)),s=n;s>=e;s--){this._getGridCellCreate(o.x,o.y,s).push(t),o.x=o.x>>1,o.y=o.y>>1}}},{key:"_isGridPointVisible",value:function(t){var e=this._shownBounds.minY<=t.y&&t.y<=this._shownBounds.maxY,n=this._shownBounds.minX,r=n<=t.x&&t.x<=this._shownBounds.maxX;if(!r&&n<0){var i=this._gridWidth[this._shownBounds.z];r=n+i<=t.x&&t.x<=i-1}return e&&r}},{key:"_onMarkerMoved",value:function(t,e,n){for(var r=this._maxZoom,i=!1,o=this._getTilePoint(e,r,new google.maps.Size(0,0)),s=this._getTilePoint(n,r,new google.maps.Size(0,0));r>=0&&(o.x!==s.x||o.y!==s.y);){var a=this._getGridCellNoCreate(o.x,o.y,r);a&&this._removeMarkerFromCell(a,t)&&this._getGridCellCreate(s.x,s.y,r).push(t),r===this._mapZoom&&(this._isGridPointVisible(o)?this._isGridPointVisible(s)||(this._removeOverlay(t),i=!0):this._isGridPointVisible(s)&&(this._addOverlay(t),i=!0)),o.x=o.x>>1,o.y=o.y>>1,s.x=s.x>>1,s.y=s.y>>1,--r}i&&this._notifyListeners()}},{key:"removeMarker",value:function(t){for(var e=this._maxZoom,n=!1,r=t.getPosition(),i=this._getTilePoint(r,e,new google.maps.Size(0,0));e>=0;){var o=this._getGridCellNoCreate(i.x,i.y,e);o&&this._removeMarkerFromCell(o,t),e===this._mapZoom&&this._isGridPointVisible(i)&&(this._removeOverlay(t),n=!0),i.x=i.x>>1,i.y=i.y>>1,--e}n&&this._notifyListeners(),this._numMarkers[t.get("__minZoom")]--}},{key:"addMarkers",value:function(t,e,n){n=this._getOptmaxZoom(n);for(var r=t.length-1;r>=0;r--)this._addMarkerBatch(t[r],e,n);this._numMarkers[e]+=t.length}},{key:"_getOptmaxZoom",value:function(t){return t||this._maxZoom}},{key:"getMarkerCount",value:function(t){for(var e=0,n=0;n<=t;n++)e+=this._numMarkers[n];return e}},{key:"getMarker",value:function(t,e,n){var r=new google.maps.LatLng(t,e),i=this._getTilePoint(r,n,new google.maps.Size(0,0)),o=new google.maps.Marker({position:r}),s=this._getGridCellNoCreate(i.x,i.y,n);if(void 0!==s)for(var a=0;a<s.length;a++)t===s[a].getPosition().lat()&&e===s[a].getPosition().lng()&&(o=s[a]);return o}},{key:"addMarker",value:function(t,e,n){n=this._getOptmaxZoom(n),this._addMarkerBatch(t,e,n);var r=this._getTilePoint(t.getPosition(),this._mapZoom,new google.maps.Size(0,0));this._isGridPointVisible(r)&&e<=this._shownBounds.z&&this._shownBounds.z<=n&&(this._addOverlay(t),this._notifyListeners()),this._numMarkers[e]++}},{key:"_getGridCellCreate",value:function(t,e,n){return t<0&&(t+=this._gridWidth[n]),this._grid[n]||(this._grid[n]=[]),this._grid[n][t]||(this._grid[n][t]=[]),this._grid[n][t][e]||(this._grid[n][t][e]=[]),this._grid[n][t][e]}},{key:"_getGridCellNoCreate",value:function(t,e,n){return t<0&&(t+=this._gridWidth[n]),this._grid[n]&&this._grid[n][t]&&this._grid[n][t][e]?this._grid[n][t][e]:null}},{key:"_getGridBounds",value:function(t,e,n,r){e=Math.min(e,this._maxZoom);var i=t.getSouthWest(),o=t.getNorthEast(),s=this._getTilePoint(i,e,n),a=this._getTilePoint(o,e,r),u=this._gridWidth[e];(o.lng()<i.lng()||a.x<s.x)&&(s.x-=u),a.x-s.x+1>=u&&(s.x=0,a.x=u-1);var l=new Ri([s,a],e);return l.z=e,l}},{key:"_getMapGridBounds",value:function(){return this._getGridBounds(this._map.getBounds(),this._mapZoom,this._swPadding,this._nePadding)}},{key:"_onMapMoveEnd",value:function(){window.setTimeout(this._updateMarkers.bind(this),0)}},{key:"visible",value:function(){return!!this.shown}},{key:"isHidden",value:function(){return!this.shown}},{key:"show",value:function(){this.shown=!0,this.refresh()}},{key:"hide",value:function(){this.shown=!1,this.refresh()}},{key:"toggle",value:function(){this.shown=!this.shown,this.refresh()}},{key:"refresh",value:function(){this.shownMarkers>0&&this._processAll(this._shownBounds,this._removeOverlay.bind(this)),this.show&&this._processAll(this._shownBounds,this._addOverlay.bind(this)),this._notifyListeners()}},{key:"_updateMarkers",value:function(){this._mapZoom=this._map.getZoom();var t=this._getMapGridBounds();t.equals(this._shownBounds)&&t.z===this._shownBounds.z||(t.z!==this._shownBounds.z?(this._processAll(this._shownBounds,this._removeOverlay.bind(this)),this.show&&this._processAll(t,this._addOverlay.bind(this))):(this._rectangleDiff(this._shownBounds,t,this._removeCellMarkers.bind(this)),this.show&&this._rectangleDiff(t,this._shownBounds,this._addCellMarkers.bind(this))),this._shownBounds=t,this._notifyListeners())}},{key:"_notifyListeners",value:function(){google.maps.event.trigger(this,"changed",this._shownBounds,this.shownMarkers)}},{key:"_processAll",value:function(t,e){for(var n=t.minX;n<=t.maxX;n++)for(var r=t.minY;r<=t.maxY;r++)this._processCellMarkers(n,r,t.z,e)}},{key:"_processCellMarkers",value:function(t,e,n,r){var i=this._getGridCellNoCreate(t,e,n);if(i)for(var o=i.length-1;o>=0;o--)r(i[o])}},{key:"_removeCellMarkers",value:function(t,e,n){this._processCellMarkers(t,e,n,this._removeOverlay.bind(this))}},{key:"_addCellMarkers",value:function(t,e,n){this._processCellMarkers(t,e,n,this._addOverlay.bind(this))}},{key:"_rectangleDiff",value:function(t,e,n){this._rectangleDiffCoords(t,e,(function(e,r){n(e,r,t.z)}))}},{key:"_rectangleDiffCoords",value:function(t,e,n){var r,i,o=t.minX,s=t.minY,a=t.maxX,u=t.maxY,l=e.minX,h=e.minY,c=e.maxX,f=e.maxY;for(r=o;r<=a;r++){for(i=s;i<=u&&i<h;i++)n(r,i);for(i=Math.max(f+1,s);i<=u;i++)n(r,i)}for(i=Math.max(s,h);i<=Math.min(u,f);i++){for(r=Math.min(a+1,l)-1;r>=o;r--)n(r,i);for(r=Math.max(o,c+1);r<=a;r++)n(r,i)}}},{key:"_removeMarkerFromCell",value:function(t,e){for(var n=0,r=0;r<t.length;++r)t[r]===e&&(t.splice(r--,1),n++);return n}}]),t}();t.MarkerManager=Hi,Object.defineProperty(t,"__esModule",{value:!0})}));
